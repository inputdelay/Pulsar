<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="referrer" content="no-referrer">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta name="viewport" content="width=device-width, initial-scale=0.5">
    <meta name="description" content="Pulsar: Your free, fast, and secure web proxy solution.">
    <meta name="keywords" content="proxy, web proxy, Pulsar, unblock websites, free web proxy, proxy server">
    <meta name="theme-color" content="#222831">
    <meta name="googlebot" content="index, follow, snippet">
    <meta name="robots" content="index, follow">
    <title>Pulsar</title>
    <link rel="icon" href="Imgs/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="css/home.css">
    <link rel="stylesheet" type="text/css" href="css/games.css">
    <link rel="stylesheet" type="text/css" href="css/cursor.css">
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4207227785539100"
    crossorigin="anonymous"></script>
<style>

#particles-js {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -10;
      }
      .hub-container {
          position: relative; /* Needed for particles z-index */
          z-index: 1; /* Ensure content is above particles */
      }
      body {
        overflow-x: hidden;
        position: relative;
        background: linear-gradient(135deg, #0f0063, #4e06a0, #b300ff) !important; /* Consistent dark background */
      }
      /* Dark overlay - adds subtle depth */
      body::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5); /* Adjusted opacity */
        z-index: -11;
        pointer-events: none; /* Allow clicks through the overlay */
      }
      .settings-active .apps {
    z-index: 0; /* Move apps behind the settings panel */
    pointer-events: none; /* Disable clicks on apps when settings are open */
}
.settings-active .containerrr {
     z-index: 10; /* Bring settings panel to the front */
     pointer-events: auto; /* Ensure settings are clickable */
}
.containerrr {
    display: none;
}
#particles-js {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -10; /* Keep particles behind everything */
      }
      .hub-container {
          position: relative; /* Needed for children z-index context */
          z-index: 1; /* Ensure content is above particles initially */
      }
</style>
</head>
<body>
    <div id="particles-js"></div>
    <main class="hub-container">
<div class="apps">
    <a href="search.html" class="app-button" id="0"><img src="Imgs/Thebestlogo.png" alt="Search"><span>Search</span></a>
    <a href="games.html" class="app-button" id="2"><img src="Imgs/Gamesicon.png" alt="Games"><span>Games</span></a>
    <a href="ai.html" class="app-button" id="3"><img src="Imgs/AIicon.png" alt="Games"><span>Thunder-cloud AI</span></a>
    <a href="Apps/Neutron.html" class="app-button" id="4"><img src="Imgs/Neutronicon.png"><span>Neutron</span></a>
    <a href="Apps/Advanced Code Editor 1.html" class="app-button" id="5"><img src="Imgs/Advanced Code Editor 1icon.png" alt="Advanced Code Editor 1"><span>Advanced Code Editor 1</span></a>
    <a href="Apps/Advanced Code Editor 2.html" class="app-button" id="6"><img src="Imgs/Advanced Code Editor 2icon.png" alt="Advanced Code Editor 2"><span>Advanced Code Editor 2</span></a>
    <a href="Apps/Algebra Calculator.html" class="app-button" id="7"><img src="Imgs/Algebra Calculatoricon.png" alt="Algebra Calculator"><span>Algebra Calculator</span></a>
    <a href="Apps/Simple Calculator.html" class="app-button" id="8"><img src="Imgs/Simple Calculatoricon.png" alt="Simple Calculator"><span>Simple Calculator</span></a>
    <a href="Apps/Emulators/Emulator JS/Emulator JS.html" class="app-button" id="9"><img src="Imgs/Emulator JSicon.png" alt="Emulator JS"><span>Emulator JS</span></a>
    <a href="Apps/HTML Unleashed/HTML Unleashed.html" class="app-button" id="10"><img src="Imgs/HTML Unleashedicon.png" alt="HTML Unleashed"><span>HTML Unleashed</span></a>
    <a href="Apps/Ruffle/Ruffle.html" class="app-button" id="11"><img src="Imgs/Ruffleicon.png" alt="Ruffle"><span>Ruffle</span></a>
    <a href="Apps/Turbowarp/Turbowarp.html" class="app-button" id="12"><img src="Imgs/Turbowarpicon.png" alt="Turbowarp"><span>Turbowarp</span></a>
    <a href="Apps/Emulators/Emulator WebRetro/WebRetro.html" class="app-button" id="13"><img src="Imgs/Emulator WebRetroicon.png" alt="Emulator WebRetro"><span>WebRetro</span></a>
    <a href="Apps/MiniWiki.html" class="app-button" id="14"><img src="Imgs/MiniWikiicon.png" alt="MiniWiki"><span>MiniWiki</span></a>
    <a href="Apps/Wordle Bot/Wordle Bot.html" class="app-button" id="15"><img src="Imgs/Wordle Boticon.png" alt="Wordle Bot"><span>Wordle Bot</span></a>
    <a href="Apps/Weavesilk/index.html" class="app-button" id="16"><img src="Imgs/Weavesilkicon.png" alt="Weavesilk"><span>Weavesilk</span></a>

    <!-- New button added here - Added target="_blank" -->
    <a href="https://thehtmlproject.com" class="app-button" id="17" target="_blank"><img src="Imgs/websiteicon.png" alt="The HTML Project"><span>The HTML Project</span></a>

    <!-- Spacer buttons -->
    <a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a><a class="app-button" id="1" draggable="true" style="background: none !important;"><img src="Imgs/removebg.png" alt=" "><span> </span></a>
</div>
<!-- Pulsar Beams -->
<div class="beam beam--left"></div>
<div class="beam beam--right"></div>

<div class="sigma-bar">
    <a class="sigma-button" onclick="toggleAppaVisibility()"><i class="fas fa-home"></i></a>
    <a href="https://discord.gg/9KKk4DNBPE" class="sigma-button"><i class="fa-brands fa-discord"></i></a>
    <a href="https://github.com/Yeti1o1/Pulsar" class="sigma-button"><i  class="fa-brands fa-github"></i></a>
    <a href="https://drive.google.com/file/d/1XCHdt4XntG4CMOaCeoJP75GkAfrV_2E4/view?usp=drivesdk" class="sigma-button"><i  class="fas fa-folder" ></i></a>
    <a href="https://docs.google.com/forms/d/e/1FAIpQLSfa_z2rCmPxeGooJCXz9XP9TZPi8Rltb-eDCrsD9CffWi1Uwg/viewform" target="_blank" style="display:inline-flex;align-items:center;gap:8px;text-decoration:none;background-color:#111;color:white;padding:10px 20px;border-radius:8px;font-size:16px;font-weight:bold;transition:background-color 0.3s;">
        <i class="fas fa-gavel" style="font-size:20px;"></i> <span>DMCA Takedown Form</span>
      </a>

</div>
<!-- Cookie Consent Banner -->
<div id="cookieConsent" style="
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 300px;
  height: 200px;
  background: #222;
  color: white;
  padding: 10px;
  text-align: center;
  font-family: sans-serif;
  z-index: 10000;
  border-radius: 12px;
  box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
">
  <p style="margin: 10px 0;">This website uses cookies to improve your experience.</p>
  <button id="acceptCookiesBtn" style="
    margin-top: 10px;
    background: #4caf50;
    border: none;
    color: white;
    padding: 8px 16px;
    cursor: pointer;
    font-weight: bold;
  ">Understood</button>
</div>


<script>
  const cookieBanner = document.getElementById('cookieConsent');
  const acceptBtn = document.getElementById('acceptCookiesBtn');

  // Check if user already accepted
  if (localStorage.getItem('cookiesAccepted') === 'true') {
    cookieBanner.style.display = 'none';
  }

  acceptBtn.addEventListener('click', () => {
    localStorage.setItem('cookiesAccepted', 'true');
    cookieBanner.style.display = 'none';
  });
</script>

<div class="nav-bar">
    <a href="search.html" class="nav-button"><i class="fa-solid fa-globe"></i></a>
    <a href="ai.html" class="nav-button"><i class="fas fa-robot"></i></a>
    <a href="games.html" class="nav-button"><i class="fa-solid fa-basketball"></i></a>
</br>
</br>

<div id="mydiv">
    <div id="mydivheader">
        <!-- Resize Handle (left side) -->
        <div class="resize-handle">
            <i class="fa fa-arrows-v rotate-icon" aria-hidden="true"></i>
        </div>

        <!-- Buttons (right side) -->
        <div class="header-buttons">

            <!-- Fullscreen Button -->
            <button class="fullscreen-btn" onclick="toggleFullscreen()">
                <i class="fas fa-window-maximize"></i>
            </button>
            <!-- Close Button -->
            <button class="close-btn" onclick="closeDiv()">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
</div>

<div class="settingg-bar">
    <body onload="startTime()">

        <div id="txt"></div>
        <script>
            function startTime() {
                const today = new Date();
                let h = today.getHours();
                let m = today.getMinutes();
                let s = today.getSeconds();

                const use12HourFormat = true; // Change to false for 24-hour format

                if (use12HourFormat) {
                    let ampm = h >= 12 ? "PM" : "AM";
                    h = h % 12 || 12; // Convert to 12-hour format
                    document.getElementById('txt').innerHTML = h + ":" + checkTime(m) + ":" + checkTime(s) + " " + ampm;
                } else {
                    document.getElementById('txt').innerHTML = checkTime(h) + ":" + checkTime(m) + ":" + checkTime(s);
                }

                setTimeout(startTime, 1000);
            }

            function checkTime(i) {
                return i < 10 ? "0" + i : i; // Add zero in front of numbers < 10
            }
            </script>
    <div class="settinggg-bar">
<span id="datetime"></span>

<script>
    function startTime() {
        const today = new Date();
        let h = today.getHours();
        let m = today.getMinutes();
        let s = today.getSeconds();
        let month = today.toLocaleString('default', { month: 'long' });
        let day = today.getDate();

        m = checkTime(m);
        s = checkTime(s);

        document.getElementById('txt').innerHTML = month + " " + day + " - " + h + ":" + m + ":" + s;

        setTimeout(startTime, 1000);
    }

    function checkTime(i) {
        return i < 10 ? "0" + i : i;  // Add zero in front of numbers < 10
    }
    </script>
</div>
</div>
</div>
<div class="setting-bar">
    <div class="battery-container">
        <div class="battery-level" id="batteryLevel"></div>
        <span class="tooltiptext" id="tooltipText"></span>
    </div>

    <button class="setting-button" onclick="toggleStyling1()">
    <i class="fas fa-cog"></i>
</button>
</div>
<div class="Appa" style="display: none;">
    <div class="the-setta"> </div>
        <div class="appsa">
            <a href="search.html" class="appa-button" id="0-"><img src="Imgs/Thebestlogo.png" alt="Search"><span>Search</span></a>
            <a href="games.html" class="appa-button" id="2-"><img src="Imgs/Gamesicon.png" alt="Games"><span>Games</span></a>
            <a href="ai.html" class="appa-button" id="3-"><img src="Imgs/AIicon.png" alt="Games"><span>Thunder-cloud AI</span></a>
            <a href="Apps/Neutron.html" class="appa-button" id="4-"><img src="Imgs/Neutronicon.png"><span>Neutron</span></a>
            <a href="Apps/Advanced Code Editor 1.html" class="appa-button" id="5-"><img src="Imgs/Advanced Code Editor 1icon.png" alt="Advanced Code Editor 1"><span>Advanced Code Editor 1</span></a>
            <a href="Apps/Advanced Code Editor 2.html" class="appa-button" id="6-"><img src="Imgs/Advanced Code Editor 2icon.png" alt="Advanced Code Editor 2"><span>Advanced Code Editor 2</span></a>
            <a href="Apps/Algebra Calculator.html" class="appa-button" id="7-"><img src="Imgs/Algebra Calculatoricon.png" alt="Algebra Calculator"><span>Algebra Calculator</span></a>
            <a href="Apps/Simple Calculator.html" class="appa-button" id="8-"><img src="Imgs/Simple Calculatoricon.png" alt="Simple Calculator"><span>Simple Calculator</span></a>
            <a href="Apps/Emulators/Emulator JS/Emulator JS.html" class="appa-button" id="9-"><img src="Imgs/Emulator JSicon.png" alt="Emulator JS"><span>Emulator JS</span></a>
            <a href="Apps/HTML Unleashed/HTML Unleashed.html" class="appa-button" id="10-"><img src="Imgs/HTML Unleashedicon.png" alt="HTML Unleashed"><span>HTML Unleashed</span></a>
            <a href="Apps/Ruffle/Ruffle.html" class="appa-button" id="11-"><img src="Imgs/Ruffleicon.png" alt="Ruffle"><span>Ruffle</span></a>
            <a href="Apps/Turbowarp/Turbowarp.html" class="appa-button" id="12-"><img src="Imgs/Turbowarpicon.png" alt="Turbowarp"><span>Turbowarp</span></a>
            <a href="Apps/Emulators/Emulator WebRetro/WebRetro.html" class="appa-button" id="13-"><img src="Imgs/Emulator WebRetroicon.png" alt="Emulator WebRetro"><span>WebRetro</span></a>
            <a href="Apps/MiniWiki.html" class="appa-button" id="14-"><img src="Imgs/MiniWikiicon.png" alt="MiniWiki"><span>MiniWiki</span></a>
            <a href="Apps/Wordle Bot/Wordle Bot.html" class="appa-button" id="15-"><img src="Imgs/Wordle Boticon.png" alt="Wordle Bot"><span>Wordle Bot</span></a>
            <a href="Apps/Weavesilk/index.html" class="appa-button" id="16-"><img src="Imgs/Weavesilkicon.png" alt="Weavesilk"><span>Weavesilk</span></a>

            <!-- New button added here (matching the apps div) - Added target="_blank" -->
            <a href="https://thehtmlproject.com" class="appa-button" id="17-" target="_blank"><img src="Imgs/websiteicon.png" alt="The HTML Project"><span>The HTML Project</span></a>

        </div>
</div>
<!-- Div to Toggle -->
<div class="containerrr" style="display: none;">
    <div class="blud-bar">
        <button class="blud-button" onclick="toggleStyling2()"><i class="fa-solid fa-square-pen"></i></a>
    </div>
    <div class="blud-bar" style="bottom: 66%;">
        <button class="blud-button" onclick="toggleStyling2()"><i class="fa-solid fa-arrow-pointer"></i></a>
    </div>
    <div class="blud-line"></div>
    <div style="
    position: absolute;
    top: 59%;
    left: 46%;
    transform: translate(-50%, -50%);
    align-content: center;
    text-align: center;
    background-color: black;
    border-radius: 4%;
    padding: 10px;
">

</div>
    <div class="the-set"> </div>
    <button class="settingpicc" onclick="toggleBGoptions()"><img class="settingimgg" src="Imgs/Add More.png"></button>
    <button class="settingpic" style="left: 55%"><img class="settingimgg" style="left: 55%" src="Imgs/Globbypic.png"></button>
    <button class="settingpic" style="top: 40%"><img class="settingimgg" style="top: 40%" src="Imgs/Yellowglowpic.png"></button>
    <button class="settingpic" style="top: 40%; left: 55%"><img class="settingimgg" style="top: 40%; left: 55%" src="Imgs/Spacepic.png"></button>

    <div class="updrop-container">
        <button class="updrop-button"><i class="fa-solid fa-square-pen"></i></button>
        <ul class="updrop-menu">
            <li data-color="white-gradient" style="background: linear-gradient(white, gray);"></li>
            <li data-color="yellow-gradient" style="background: linear-gradient(yellow, gold);"></li>
            <li data-color="orange-gradient" style="background: linear-gradient(orange, darkorange);"></li>
            <li data-color="red-gradient" style="background: linear-gradient(red, darkred);"></li>
            <li data-color="purple-gradient" style="background: linear-gradient(#800080, #4B0082);"></li>
            <li data-color="green-gradient" style="background: linear-gradient(green, darkgreen);"></li>
            <li data-color="blue-gradient" style="background: linear-gradient(blue, darkblue);"></li>
            <li data-color="brown-gradient" style="background: linear-gradient(#8B4513, #5C3317);"></li>
            <li data-color="black-solid" style="background: black;"></li>
        </ul>
    </div>
    <input type="file" id="uploadButton" accept="image/*">
    <div class="toggleBGoptions" style="display: none;">
        <div style="
        position: absolute;
        top: 0%;
        left: 0%;
        width: 100%;
        height: 100%;
        color: black;
        align-content: center;
        text-align: center;
        background-color: black;
        padding: 10px;
        z-index: 9999;
    ">

    </div>
        <div style="z-index: 999999; position: relative;">
            <button class="settingpic"><img class="settingimgg" src="Imgs/Spacepic.png"></button>
            <button class="settingpic" style="left: 5%"><img class="settingimgg" style="left: 5%" src="Imgs/Globbypic.png"></button>
            <button class="settingpic" style="top: 40%"><img class="settingimgg" style="top: 40%" src="Imgs/Yellowglowpic.png"></button>
            <button class="settingpic" style="top: 40%; left: 55%"><img class="settingimgg" style="top: 40%; left: 55%" src="Imgs/Dunespic.png"></button>

            <button style="position: absolute; bottom: 40%; left: 50%; transform: translate(-50%, -50%); width: 40%; height: 70px; border-radius: 15px; background-color: white; border: none; font-size: 10rem; color: black; box-shadow: 0 4px 8px rgba(0,0,0,0.2);" onclick="toggleBGoptions()"></button>

        </div>
    </div>
    <div class="toggleStyling2" style="display: none;">
        <div style="
        position: absolute;
        top: 39%;
        left: 46%;
        transform: translate(-50%, -50%);
        align-content: center;
        text-align: center;
        background-color: black;
        border-radius: 4%;
        padding: 10px;
    ">

    </div>
                <button class="blud-button" onclick="toggleStyling2()"><i class="fa-solid fa-square-pen"></i></button>
        <div class="blud-bar" style="bottom: 66%;">
            <button class="blud-button" onclick="toggleStyling2()"><i class="fa-solid fa-arrow-pointer"></i></button>
        </div>
        <div class="blud-line"></div>
        <div style="position: absolute; top: 59%; left: 46%; transform: translate(-50%, -50%); align-content: center; text-align: center; background-color: black; border-radius: 4%; padding: 10px;">
        </div>
        <div class="the-set"> </div>
        <button class="cursorpic" onclick="changeCursor('style1')"><img class="settingimgg" src="Imgs/Cursor1.png"></button>
        <button class="cursorpic" style="left: 55%" onclick="changeCursor('style2')"><img class="settingimgg" style="left: 55%" src="Imgs/Cursor2.png"></button>
        <button class="cursorpic" style="top: 40%" onclick="changeCursor('style3')"><img class="settingimgg" style="top: 40%" src="Imgs/Cursor3.png"></button>
        <button class="cursorpic" style="top: 40%; left: 55%" onclick="changeCursor('style4')"><img class="settingimgg" style="top: 40%; left: 55%" src="Imgs/Cursor4.png"></button>
        <div class="updrop-container">
            <button class="updrop-button"><i class="fa-solid fa-square-pen"></i></button>
            <ul class="updrop-menu">
                <li onclick="changeCursor('style9')" style="background: linear-gradient(white, gray);"></li>
                <li onclick="changeCursor('style1')" style="background: linear-gradient(yellow, gold);"></li>
                <li onclick="changeCursor('style2')" style="background: linear-gradient(orange, darkorange);"></li>
                <li onclick="changeCursor('style3')" style="background: linear-gradient(red, darkred);"></li>
                <li onclick="changeCursor('style4')" style="background: linear-gradient(#800080, #4B0082);"></li>
                <li onclick="changeCursor('style5')" style="background: linear-gradient(green, darkgreen);"></li>
                <li onclick="changeCursor('style6')" style="background: linear-gradient(blue, darkblue);"></li>
                <li onclick="changeCursor('style7')" style="background: linear-gradient(#8B4513, #5C3317);"></li>
                <li onclick="changeCursor('style8')" style="background: black;"></li>
            </ul>
        </div>

        </div>
        <input type="file" id="uploadButton" accept="image/*">
    </div>

</div>
</main>
<script>
function toggleAppaVisibility() {
    const div = document.querySelector('.Appa');
    div.style.display = div.style.display === 'none' ? 'block' : 'none';
}
function toggleStyling1() {
    const div = document.querySelector('.containerrr');
    div.style.display = div.style.display === 'none' ? 'block' : 'none';
}
function toggleStyling2() {
    const div = document.querySelector('.toggleStyling2');
    div.style.display = div.style.display === 'none' ? 'block' : 'none';
}
function toggleBGoptions() {
    const div = document.querySelector('.toggleBGoptions');
    div.style.display = div.style.display === 'none' ? 'block' : 'none';
}
</script>

</div>

<script>

    // This openSite function seems unused or for a different purpose than the iframe logic
    // leaving it as is but noted.
    function openSite(site) {
        var win = window.open();
        var url = "index.html";

        var iframe = win.document.createElement('iframe');
        iframe.style.width = "100%";
        iframe.style.height = "100%";
        iframe.style.border = "none";
        iframe.style.position = "fixed";
        iframe.style.top = "0";
        iframe.style.left = "0";
        iframe.src = url;
        win.document.body.appendChild(iframe);

        var link = win.document.createElement('link');
        link.rel = 'icon';
        link.type = 'image/x-icon';

        switch (site) {
            case 'Pulsar':
                link.href = 'Imgs/favicon.ico';
                win.document.title = 'Pulsar';
                break;
            case 'Canva':
                link.href = 'Imgs/Canva.png';
                win.document.title = 'Home - Canva';
                break;
            case 'Clever':
                link.href = 'Imgs/Clever.png';
                win.document.title = 'Clever | Connect every student to a world of learning';
                break;
            case 'Daaurrh':
                link.href = 'Imgs/Daaurrh.png';
                win.document.title = 'Daaurrh';
                break;
            case 'Gmail':
                link.href = 'Imgs/Gmail.png';
                win.document.title = 'Inbox';
                break;
            case 'Discord':
                link.href = 'Imgs/Discord.png';
                win.document.title = 'Discord';
                break;
            case 'YouTube':
                link.href = 'Imgs/YouTube.png';
                win.document.title = 'YouTube';
                break;
            default:
                return;
        }

        win.document.head.appendChild(link);
    }

    const updropButton = document.querySelector('.updrop-button');
    const updropMenu = document.querySelector('.updrop-menu');
    const menuOptions = document.querySelectorAll('.updrop-menu li');
    // const pulsarDiv = document.querySelector('.pulsar'); // Note: There's no element with class 'pulsar' in the provided HTML. This part of the script might have no effect.

    document.addEventListener('DOMContentLoaded', () => {
    const savedBg = localStorage.getItem('SavedBg'); // Use SavedBg key consistently

    if (savedBg) {
        if (savedBg.startsWith('url(') || savedBg.startsWith('linear-gradient')) {
             document.body.style.backgroundImage = savedBg;
             document.body.style.backgroundSize = 'cover';
             document.body.style.backgroundRepeat = 'no-repeat';
             document.body.style.backgroundPosition = 'center center';
             document.body.style.backgroundAttachment = 'fixed';
             document.body.style.background = ''; // Clear simple background if background-image is set
        } else { // Assume it's a solid color or other simple background
            document.body.style.background = savedBg;
            document.body.style.backgroundSize = 'auto'; // Auto for solid colors
            document.body.style.backgroundImage = ''; // Clear background-image if simple background is set
        }

    } else {
        // Default background if nothing is saved
        document.body.style.backgroundImage = 'linear-gradient(135deg, #0f0063, #4e06a0, #b300ff)';
        document.body.style.backgroundSize = 'cover';
        document.body.style.backgroundRepeat = 'no-repeat';
        document.body.style.backgroundPosition = 'center center';
        document.body.style.backgroundAttachment = 'fixed';
         document.body.style.background = ''; // Ensure simple background is cleared
    }
});

    updropButton.addEventListener('click', () => {
        updropMenu.classList.toggle('active');
    });

    menuOptions.forEach(option => {
        option.addEventListener('click', () => {
            const color = option.getAttribute('data-color');
            let backgroundStyle;
            switch (color) {
                case 'black-solid':
                    backgroundStyle = '#000000'; // Solid black
                    document.body.style.backgroundImage = ''; // Clear background image
                    document.body.style.background = backgroundStyle; // Set simple background
                    document.body.style.backgroundSize = 'auto'; // Auto for solid colors
                    break;
                case 'green-gradient':
                    backgroundStyle = 'linear-gradient(315deg, #00ff51, #00cc66, #003300)';
                    document.body.style.background = ''; // Clear simple background
                    document.body.style.backgroundImage = backgroundStyle; // Set background image for gradient
                    document.body.style.backgroundSize = 'cover'; // Use cover for gradients
                    break;
                case 'red-gradient':
                    backgroundStyle = 'linear-gradient(135deg, #630000, #ff2d00, #8e44ad)';
                     document.body.style.background = '';
                     document.body.style.backgroundImage = backgroundStyle;
                     document.body.style.backgroundSize = 'cover';
                    break;
                case 'purple-gradient':
                    backgroundStyle = 'linear-gradient(135deg, #8e44ad, #e74c3c, #f39c12)';
                     document.body.style.background = '';
                     document.body.style.backgroundImage = backgroundStyle;
                     document.body.style.backgroundSize = 'cover';
                    break;
                case 'yellow-gradient':
                    backgroundStyle = 'linear-gradient(135deg, #f39c12, #ffb700, #e74c3c)';
                     document.body.style.background = '';
                     document.body.style.backgroundImage = backgroundStyle;
                     document.body.style.backgroundSize = 'cover';
                    break;
                case 'white-gradient':
                    backgroundStyle = 'linear-gradient(135deg, #ffffff, #C0C0C0, #C0C0C0)';
                     document.body.style.background = '';
                     document.body.style.backgroundImage = backgroundStyle;
                     document.body.style.backgroundSize = 'cover';
                    break;
                case 'orange-gradient':
                    backgroundStyle = 'linear-gradient(135deg, #e74c3c, #f39c12, #ffbf00)';
                     document.body.style.background = '';
                     document.body.style.backgroundImage = backgroundStyle;
                     document.body.style.backgroundSize = 'cover';
                    break;
                case 'blue-gradient':
                    backgroundStyle = 'linear-gradient(135deg, #0f0063, #4e06a0, #b300ff)';
                     document.body.style.background = '';
                     document.body.style.backgroundImage = backgroundStyle;
                     document.body.style.backgroundSize = 'cover';
                    break;
                case 'brown-gradient':
                    backgroundStyle = 'linear-gradient(135deg, #693801, #b8680f, #ee2604)';
                     document.body.style.background = '';
                     document.body.style.backgroundImage = backgroundStyle;
                     document.body.style.backgroundSize = 'cover';
                    break;
                default:
                   backgroundStyle = 'linear-gradient(135deg, #0f0063, #4e06a0, #b300ff)'; // Default case
                    document.body.style.background = '';
                    document.body.style.backgroundImage = backgroundStyle;
                    document.body.style.backgroundSize = 'cover';
            }

            localStorage.setItem('SavedBg', backgroundStyle); // Save the chosen style


            document.body.style.backgroundRepeat = 'no-repeat';
            document.body.style.backgroundPosition = 'center center';
            document.body.style.backgroundAttachment = 'fixed';


            updropMenu.classList.remove('active');
        });
    });

    document.addEventListener('click', (e) => {
        if (updropMenu && !updropButton.contains(e.target) && !updropMenu.contains(e.target)) { // Added check for updropMenu existence
            updropMenu.classList.remove('active');
        }
    });
</script>
<script>

    function openIframe(src) { // Removed title parameter as it's calculated inside

        // Only proceed if src is not null or empty
        if (!src) {
            console.warn("Cannot open iframe: Source URL is empty.");
            return;
        }

        const iframeTitle = src.includes('ai.html') ? "Thundercloud AI" : capitalizeFirstLetter(src.split('/').pop().split('.')[0].replace('thehtmlproject', 'The HTML Project')); // Improved title extraction

        // Create a valid ID from the title
        const iframeId = `iframe-${iframeTitle.replace(/[^a-zA-Z0-9]/g, '-')}`;

        // Check if an iframe with this ID already exists
        const existingIframeContainer = document.getElementById(iframeId);
        if (existingIframeContainer) {
            console.log(`Iframe for ${iframeTitle} already exists. Bringing to front.`);
            // Bring the existing iframe container to the front
            document.querySelectorAll(".draggable-container").forEach(el => el.style.zIndex = "9000");
            existingIframeContainer.style.zIndex = "10000";
            return; // Do not create a new iframe
        }

        const container = document.createElement("div");
        container.id = iframeId;
        container.className = "draggable-container";
        container.style.position = "absolute"; // Start with absolute for dragging
        container.style.top = "50%"; // Initial centered position
        container.style.left = "50%"; // Initial centered position
        container.style.transform = "translate(-50%, -50%)"; // Center based on the element's size
        container.style.width = "80%"; // Initial size
        container.style.height = "80%"; // Initial size
        container.style.zIndex = "10000"; // Bring the new iframe to the front
        container.style.backgroundColor = "rgba(17, 17, 17, 0.8)"; // Semi-transparent dark background
        container.style.boxShadow = "0 0 10px 5px rgba(0, 0, 0, 0.5)";
        container.style.borderRadius = "8px"; // Optional: add rounded corners
        container.style.overflow = "hidden"; // Hide overflow content (like resize handle)


        // Bring the new iframe to the front on creation
        document.querySelectorAll(".draggable-container").forEach(el => el.style.zIndex = "9000");
        container.style.zIndex = "10000";

        container.addEventListener("mousedown", () => {
            // Bring to front when clicked
            document.querySelectorAll(".draggable-container").forEach(el => el.style.zIndex = "9000");
            container.style.zIndex = "10000";
        });

        const header = document.createElement("div");
        header.className = "draggable-header";
        header.style.display = "flex";
        header.style.alignItems = "center";
        header.style.justifyContent = "space-between";
        header.style.padding = "5px";
        header.style.cursor = "move";
        header.style.backgroundColor = "#000000";
        header.style.color = "#fff";
        header.style.zIndex = "10";
        header.style.borderTopLeftRadius = "8px"; // Match container radius
        header.style.borderTopRightRadius = "8px";


        header.innerHTML = `
            <span style="margin-left: 10px; font-weight: bold;">${iframeTitle}</span>
            <div class="header-buttons" style="display: flex; gap: 5px; margin-right: 5px;">
                <button class="fullscreen-btn" onclick="toggleFullscreen('${iframeId}')" style="background: transparent; border: none; color: white; cursor: pointer; font-size: 16px;"><i class="fa-solid fa-expand"></i></button>
                <button class="close-btn" onclick="clearGameAutoOpen(); clearAppAutoOpen(); document.getElementById('${iframeId}').remove()" style="background: transparent; border: none; color: white; cursor: pointer; font-size: 16px;"><i class="fa-solid fa-xmark fa-lg"></i></button>
            </div>
        `;

        // Attach dragging functionality using the correct function
        makeDraggableIframe(container, header);

        const iframe = document.createElement("iframe");
        iframe.src = src;
        iframe.style.width = "100%";
        iframe.style.height = "calc(100% - 30px)"; // Adjust height to account for header (assuming header is 30px tall)
        iframe.style.border = "none"; // Remove iframe's default border
        iframe.setAttribute('allowfullscreen', ''); // Allow iframe content to go fullscreen
         iframe.style.display = "block"; // Ensure iframe is a block element


        const resizeHandle = document.createElement("div");
        resizeHandle.className = "resize-handle-iframe"; // Different class name to distinguish
        resizeHandle.style.width = "10px";
        resizeHandle.style.height = "10px";
        resizeHandle.style.position = "absolute";
        resizeHandle.style.bottom = "0";
        resizeHandle.style.right = "0";
        resizeHandle.style.cursor = "se-resize";
        resizeHandle.style.backgroundColor = "rgba(255, 255, 255, 0.2)"; // Make handle visible
        resizeHandle.style.zIndex = "11"; // Ensure handle is above iframe


        addResizeFunctionalityIframe(container, resizeHandle); // Use correct resize function

        container.appendChild(header);
        container.appendChild(iframe);
        container.appendChild(resizeHandle);

        document.body.appendChild(container);

        // Note: toggleFullscreen is called automatically here, which will make it fixed position.
        // If you want it to start as a draggable window, remove this line.
        // For now, keeping the original behavior but noting it.
        // toggleFullscreen(iframeId);


        iframe.addEventListener("mouseenter", () => {
            // Assuming you have a custom cursor element
            const customCursor = document.getElementById("customCursor");
            if (customCursor) {
                customCursor.style.display = "none";
            }
        });

        iframe.addEventListener("mouseleave", () => {
             const customCursor = document.getElementById("customCursor");
            if (customCursor) {
                customCursor.style.display = "block";
            }
        });
    }

    function capitalizeFirstLetter(string) {
         if (!string) return "";
         // Handle specific known names and compound words
         const knownNames = {
             'ai': 'AI',
             'js': 'JS',
             'webretro': 'WebRetro',
             'htmlunleashed': 'HTML Unleashed',
             'miniwiki': 'MiniWiki',
             'wordlebot': 'Wordle Bot',
             'thehtmlproject': 'The HTML Project', // Added for the new site
             'editor1': 'Editor 1', // Example: if you had 'advancedcodeeditor1.html'
             'editor2': 'Editor 2', // Example
             'calculator': 'Calculator', // Example
             'simplecalculator': 'Simple Calculator', // Example
             'algebracalculator': 'Algebra Calculator', // Example
             'emulatorjs': 'Emulator JS', // Example
             'emulatorwebretro': 'Emulator WebRetro', // Example
         };

         const lowerString = string.toLowerCase();

         // Check if it's a known name
         if (knownNames[lowerString]) {
             return knownNames[lowerString];
         }

         // Handle spaces and capitalize words
         return string
             .replace(/([A-Z])/g, ' $1') // Add space before capital letters (e.g., "AdvancedCodeEditor" -> "Advanced Code Editor")
             .split(/[\s-_]+/) // Split by spaces, hyphens, underscores
             .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()) // Capitalize first letter of each word
             .join(' '); // Join words with a space
    }


    function toggleFullscreen(iframeId) {
        const iframeContainer = document.getElementById(iframeId);
        if (!iframeContainer) return; // Added check

        const iframe = iframeContainer.querySelector("iframe");
        const fullscreenBtn = iframeContainer.querySelector('.fullscreen-btn i');


        const isFullscreen = iframeContainer.classList.contains("fullscreen");

        if (!isFullscreen) {
            // Store current position and size before going fullscreen
            iframeContainer._originalPosition = {
                top: iframeContainer.style.top,
                left: iframeContainer.style.left,
                width: iframeContainer.style.width,
                height: iframeContainer.style.height,
                transform: iframeContainer.style.transform, // Store transform
                position: iframeContainer.style.position // Store position
            };


            iframeContainer.classList.add("fullscreen");
            iframeContainer.style.position = "fixed";
            iframeContainer.style.top = "0";
            iframeContainer.style.left = "0";
            iframeContainer.style.width = "100%";
            iframeContainer.style.height = "100%";
            iframeContainer.style.transform = "none"; // Remove transform in fullscreen
            iframeContainer.style.zIndex = "10001"; // Ensure it's on top of everything

            // Hide resize handle in fullscreen
            const resizeHandle = iframeContainer.querySelector('.resize-handle-iframe');
            if (resizeHandle) resizeHandle.style.display = 'none';

            if (iframe) iframe.style.height = "calc(100% - 30px)"; // Keep iframe height accounting for header
            if (fullscreenBtn) {
                fullscreenBtn.classList.remove('fa-expand');
                fullscreenBtn.classList.add('fa-compress');
            }


        } else {
            iframeContainer.classList.remove("fullscreen");

            // Restore original position and size
            if (iframeContainer._originalPosition) {
                iframeContainer.style.position = iframeContainer._originalPosition.position;
                iframeContainer.style.top = iframeContainer._originalPosition.top;
                iframeContainer.style.left = iframeContainer._originalPosition.left;
                iframeContainer.style.width = iframeContainer._originalPosition.width;
                iframeContainer.style.height = iframeContainer._originalPosition.height;
                iframeContainer.style.transform = iframeContainer._originalPosition.transform; // Restore transform
                 // If original was absolute and centered with transform, restore that
                if (iframeContainer._originalPosition.position === 'absolute' && iframeContainer._originalPosition.transform.includes('translate')) {
                     // Transform already restored
                 } else if (iframeContainer.style.position === 'absolute' && !iframeContainer.style.transform) {
                      // If no transform was saved but position is absolute, maybe reset to default drag start?
                      // Or better, just keep the restored values.
                 }

            } else {
                 // Fallback to default non-fullscreen size/position if original wasn't stored
                 iframeContainer.style.position = "absolute";
                 iframeContainer.style.top = "10%";
                 iframeContainer.style.left = "10%";
                 iframeContainer.style.width = "80%";
                 iframeContainer.style.height = "80%";
                 iframeContainer.style.transform = "none";
            }

             iframeContainer.style.zIndex = "10000"; // Lower z-index

             // Show resize handle again
            const resizeHandle = iframeContainer.querySelector('.resize-handle-iframe');
            if (resizeHandle) resizeHandle.style.display = 'block';


            if (iframe) iframe.style.height = "calc(100% - 30px)"; // Keep iframe height accounting for header
             if (fullscreenBtn) {
                fullscreenBtn.classList.remove('fa-compress');
                fullscreenBtn.classList.add('fa-expand');
             }
        }
    }

    // Renamed function for dragging iframes to distinguish from #mydiv drag
    function makeDraggableIframe(elmnt, handle) {
        let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;

        if (!handle || !elmnt) { // Check if elements exist
             console.warn("Draggable element or handle not found.");
             return;
        }

        handle.onmousedown = function (e) {
            e = e || window.event;
            e.preventDefault();

            // Ensure dragging is only for non-fullscreen mode
            if (elmnt.classList.contains('fullscreen')) {
                return; // Do not drag if fullscreen
            }

            // Get the initial mouse cursor position
            pos3 = e.clientX;
            pos4 = e.clientY;

            // Get the initial position of the element relative to the viewport
            const rect = elmnt.getBoundingClientRect();
            pos1 = e.clientX - rect.left;
            pos2 = e.clientY - rect.top;

            document.onmouseup = closeDragElement;
            document.onmousemove = elementDrag;

            // Bring the dragged element to the front
            document.querySelectorAll(".draggable-container").forEach(el => el.style.zIndex = "9000");
            elmnt.style.zIndex = "10000";
             elmnt.style.transform = "none"; // Remove transform during drag to simplify positioning
        }

        function elementDrag(e) {
            e = e || window.event;
            e.preventDefault();

            // Calculate the new cursor position relative to the element's initial top-left corner click point
            var newPosX = e.clientX - pos1;
            var newPosY = e.clientY - pos2;

            // Update the element's position
            elmnt.style.top = newPosY + "px";
            elmnt.style.left = newPosX + "px";
            elmnt.style.position = 'absolute'; // Ensure position is absolute when dragging

             // Optional: Add boundary checks if needed
             // const parentRect = elmnt.parentElement.getBoundingClientRect();
             // const elmntRect = elmnt.getBoundingClientRect();
             // if (newPosY < 0) elmnt.style.top = "0px";
             // if (newPosX < 0) elmnt.style.left = "0px";
             // if (newPosY + elmntRect.height > parentRect.height) elmnt.style.top = `${parentRect.height - elmntRect.height}px`;
             // if (newPosX + elmntRect.width > parentRect.width) elmnt.style.left = `${parentRect.width - elmntRect.width}px`;
        }

        function closeDragElement() {
            document.onmouseup = null;
            document.onmousemove = null;
             // Optional: Re-apply transform if needed after drag stops, but removing it during drag is cleaner.
        }
    }

    // Renamed function for resizing iframes
    function addResizeFunctionalityIframe(elmnt, handle) {
        let startX, startY, startWidth, startHeight;

        if (!handle || !elmnt) { // Check if elements exist
             console.warn("Resize element or handle not found.");
             return;
        }

        handle.onmousedown = function (e) {
            e.preventDefault();

             // Ensure resizing is only for non-fullscreen mode
            if (elmnt.classList.contains('fullscreen')) {
                return; // Do not resize if fullscreen
            }

            startX = e.clientX;
            startY = e.clientY;
             // Use offsetWidth/offsetHeight for current rendered size
            startWidth = elmnt.offsetWidth;
            startHeight = elmnt.offsetHeight;


            document.onmousemove = resize;
            document.onmouseup = stopResize;

             // Bring the resized element to the front
            document.querySelectorAll(".draggable-container").forEach(el => el.style.zIndex = "9000");
            elmnt.style.zIndex = "10000";
             elmnt.style.transform = "none"; // Remove transform during resize

        };

        function resize(e) {
            e.preventDefault();
            const newWidth = startWidth + (e.clientX - startX);
            const newHeight = startHeight + (e.clientY - startY);

            // Minimum size check (e.g., 200px width, considering header height for min height)
            const minWidth = 200;
            const minHeight = 100; // Assuming header is ~30px + some iframe content height

            if (newWidth > minWidth) elmnt.style.width = `${newWidth}px`;
            if (newHeight > minHeight) elmnt.style.height = `${newHeight}px`;

             // Update start positions for continuous resizing without jumpiness
             // This is a common technique for resizing
             startX = e.clientX;
             startY = e.clientY;
             startWidth = parseInt(elmnt.style.width, 10);
             startHeight = parseInt(elmnt.style.height, 10);
        }

        function stopResize() {
            document.onmousemove = null;
            document.onmouseup = null;
        }
    }


    // Modified the click listener to check for target="_blank"
    document.querySelectorAll(".app-button, .nav-button, .appa-button").forEach(button => { // Added .nav-button
        button.addEventListener("click", function (event) {
            const href = this.getAttribute("href");
             const target = this.getAttribute("target"); // Get the target attribute

            // Check if the link has target="_blank"
            if (target === "_blank") {
                // Let the default link behavior happen (opens in a new tab)
                console.log(`Opening ${href} in a new tab.`);
                // No preventDefault() needed here
            } else {
                // Prevent the default link behavior
                event.preventDefault();
                // Open in an iframe
                if (href) openIframe(href);
            }
        });
    });

</script>
<script>
    // Assuming you have a custom cursor element with id="customCursor" and spikes element with id="spikes"
    const customCursor = document.getElementById('customCursor');
    const spikes = document.getElementById('spikes');
    let mouseX = 0;
    let mouseY = 0;

    document.addEventListener('mousemove', (e) => {
        // Use raw clientX/Y for custom cursor position
        mouseX = e.clientX;
        mouseY = e.clientY;
        // Only update cursor style if element exists
        if (customCursor) {
             customCursor.style.left = `${mouseX}px`;
             customCursor.style.top = `${mouseY}px`;
             customCursor.style.display = 'block'; // Ensure it's visible on mousemove
        }
    });

    document.addEventListener('mouseleave', () => {
        // Only hide cursor if element exists
        if (customCursor) {
            customCursor.style.display = 'none';
        }
    });

    document.addEventListener('mouseenter', () => {
        // Only show cursor if element exists
        if (customCursor) {
            customCursor.style.display = 'block';
        }
    });

    // Removed the updateCursor requestAnimationFrame loop as setting position directly in mousemove is generally sufficient
    // for a simple follow-the-cursor effect and avoids potential performance issues with RAF for this specific use case.
    // If you need complex animations or trails, RAF is appropriate, but not for simple positioning.

    // Assuming spikes element exists and the hover effect is desired
    if (spikes) {
        const hoverElements = document.querySelectorAll('.nav-button'); // Target only nav-buttons
        hoverElements.forEach(element => {
            element.addEventListener('mouseenter', () => {
                spikes.classList.add('visible');
            });
            element.addEventListener('mouseleave', () => {
                spikes.classList.remove('visible');
            });
        });
    } else {
         console.log("Spikes element not found. Hover effect for cursor might not work.");
    }

</script>


<script>
    // Redundant background loading logic removed.
    // The DOMContentLoaded listener earlier handles loading from 'SavedBg'.
</script>

<script>

    // This script handles drag/resize for the element with id="mydiv".
    // It is separate from the iframe dragging logic.

    // Call dragElement for #mydiv on page load
    window.addEventListener('load', () => {
        const mydiv = document.getElementById("mydiv");
        if (mydiv) {
            dragElement(mydiv);
        } else {
            console.warn("#mydiv element not found. Dragging functionality for #mydiv is disabled.");
        }
    });


    // This is the dragElement function specifically for #mydiv (and potentially other elements if called).
    function dragElement(elmnt) {
        var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;

        // Get the drag handle - default to the element itself if header not found
        const header = document.getElementById(elmnt.id + "header") || elmnt;

        if (!header) { // Check if handle/element exists
             console.warn(`Drag handle not found for element #${elmnt.id}. Dragging disabled.`);
             return;
        }

        header.onmousedown = dragMouseDown;


        function dragMouseDown(e) {
            e = e || window.event;
            e.preventDefault();
            // Get the mouse cursor position at startup:
            pos3 = e.clientX;
            pos4 = e.clientY;

             // Get the element's current position relative to the viewport
            const rect = elmnt.getBoundingClientRect();
            // Calculate the offset from the element's top-left corner to the mouse click point
            pos1 = e.clientX - rect.left;
            pos2 = e.clientY - rect.top;


            document.onmouseup = closeDragElement;
            // Call a function whenever the cursor moves:
            document.onmousemove = elementDrag;

             // Optional: Bring the element to front when dragging starts
             // if (elmnt.style.position === 'absolute' || elmnt.style.position === 'fixed') {
             //      elmnt.style.zIndex = (parseInt(elmnt.style.zIndex) || 0) + 1; // Increment z-index
             // }
        }

        function elementDrag(e) {
            e = e || window.event;
            e.preventDefault();

            // Calculate the new cursor position:
            var newPosX = e.clientX - pos1;
            var newPosY = e.clientY - pos2;

            // Set the element's new position:
            elmnt.style.top = newPosY + "px";
            elmnt.style.left = newPosX + "px";
             // Ensure the element is absolutely positioned to follow mouse
            elmnt.style.position = 'absolute';

            // Optional: Keep element within viewport boundaries
            // const viewportWidth = window.innerWidth;
            // const viewportHeight = window.innerHeight;
            // const elmntRect = elmnt.getBoundingClientRect();

            // if (newPosY < 0) elmnt.style.top = "0px";
            // if (newPosX < 0) elmnt.style.left = "0px";
            // if (newPosY + elmntRect.height > viewportHeight) elmnt.style.top = `${viewportHeight - elmntRect.height}px`;
            // if (newPosX + elmntRect.width > viewportWidth) elmnt.style.left = `${viewportWidth - elmntRect.width}px`;
        }

        function closeDragElement() {
            // Stop moving when mouse button is released:
            document.onmouseup = null;
            document.onmousemove = null;
        }
    }
</script>

<script>
    // These functions are for the element with id="mydiv"
    function closeDiv() {
        var div = document.getElementById("mydiv");
        if (div) div.style.display = "none"; // Check if element exists
    }

    function openDiv() {
        var div = document.getElementById("mydiv");
         if (div) { // Check if element exists
            div.style.display = "block";
            // Optional: Reset position or center when opening
             div.style.top = "50%"; // Center vertically
             div.style.left = "50%"; // Center horizontally
             div.style.transform = "translate(-50%, -50%)"; // Adjust for div size
             div.style.position = 'absolute'; // Ensure it's positioned correctly
            // Optional: Set a default size if not already set
            // if (!div.style.width || !div.style.height) {
            //    div.style.width = "50%";
            //    div.style.height = "50%";
            // }
        }
    }
</script>

<script>
    // This resize logic is also specific to #mydiv.

    let mydivResizeHandle = document.querySelector("#mydiv .resize-handle"); // Target handle inside #mydiv
    let mydivElement = document.getElementById("mydiv");
    let isMydivResizing = false; // Use a separate flag
    let mydivLastDownX = 0;
    let mydivLastDownY = 0;
    let mydivStartWidth = 0;
    let mydivStartHeight = 0;


    if (mydivResizeHandle && mydivElement) { // Check if elements exist
        mydivResizeHandle.addEventListener("mousedown", (e) => {
            isMydivResizing = true;
            mydivLastDownX = e.clientX;
            mydivLastDownY = e.clientY;

            // Get the starting size
            mydivStartWidth = mydivElement.offsetWidth;
            mydivStartHeight = mydivElement.offsetHeight;

            e.preventDefault(); // Prevent default drag behavior
             e.stopPropagation(); // Stop event propagation

             // Optional: Bring to front on resize start
             // mydivElement.style.zIndex = (parseInt(mydivElement.style.zIndex) || 0) + 1;

            document.addEventListener("mousemove", mydivResize);
            document.addEventListener("mouseup", mydivStopResize);
        });

        function mydivResize(e) {
            if (isMydivResizing) {
                let offsetX = e.clientX - mydivLastDownX;
                let offsetY = e.clientY - mydivLastDownY;

                 // Calculate new size
                let newWidth = mydivStartWidth + offsetX;
                let newHeight = mydivStartHeight + offsetY;

                // Apply new dimensions only if they are valid (e.g., min 200px)
                const minSize = 200;
                if (newWidth > minSize) mydivElement.style.width = newWidth + "px";
                if (newHeight > minSize) mydivElement.style.height = newHeight + "px";

                // Update last position and start size for the next mousemove event
                mydivLastDownX = e.clientX;
                mydivLastDownY = e.clientY;
                 mydivStartWidth = mydivElement.offsetWidth; // Update start size based on actual element size after applying
                 mydivStartHeight = mydivElement.offsetHeight; // Update start size based on actual element size after applying

            }
        }

        function mydivStopResize() {
            isMydivResizing = false;
            document.removeEventListener("mousemove", mydivResize);
            document.removeEventListener("mouseup", mydivStopResize);
        }
    } else {
        console.warn("#mydiv or its resize handle not found. Resize functionality for #mydiv might not work.");
    }

</script>

<script>

    // The calls below seem contradictory. You probably want to call one or the other,
    // or call them conditionally based on some state (like if an iframe is open).
    // Leaving them as-is but noting the potential issue.
    // disableScrolling(); // Disables scrolling on page load
    // enableScrolling();  // Re-enables scrolling immediately after disabling it.
    // Commenting these out as they seem to cancel each other. If you need to control scrolling,
    // do it conditionally when iframes are opened/closed.
</script>
<script>

// This is the dragElement function used by openIframe.
// It was renamed to makeDraggableIframe above to distinguish it.
// This script block seems to contain a duplicate definition.
// Removing this duplicate definition.
// Make sure the call `makeDraggableIframe(container, header);` inside `openIframe`
// is using the correct function defined above.

// --- REMOVED DUPLICATE DRAG ELEMENT SCRIPT BLOCK HERE ---

</script>
<script>

    function clearGameAutoOpen() {
        localStorage.removeItem('lastClickedUrl');
    }

    function clearAppAutoOpen() {
        localStorage.removeItem('lastClickedAppUrl');
    }
</script>
<script>
// This script attempts to align buttons but might be complex or have unintended effects.
// It iterates through buttons and tries to push them to the right edge if they exceed container height.
// This seems unusual for a typical grid layout of apps.
// Leaving it as is, but noting it's an atypical layout script.
// Also, it targets '.button-container' which doesn't exist in the HTML.

// window.addEventListener('DOMContentLoaded', function() {
//     const container = document.querySelector('.button-container'); // There's no .button-container in your HTML
//     if (container) { // Add check if container exists
//         const buttons = container.querySelectorAll('.app-button'); // Select buttons within this container
//         const containerHeight = container.offsetHeight;

//         let currentHeight = 0;

//         buttons.forEach(button => {
//             // Calculate button height including margins
//             const buttonHeight = button.offsetHeight +
//                                  parseFloat(window.getComputedStyle(button).marginTop) +
//                                  parseFloat(window.getComputedStyle(button).marginBottom);
//             currentHeight += buttonHeight;

//             if (currentHeight > containerHeight) {
//                 button.style.alignSelf = 'flex-end';
//                 currentHeight = buttonHeight;
//             }
//         });
//     } else {
//         console.warn(".button-container not found. Button alignment script skipped.");
//     }
// });
// Commenting this script block out as it's likely not functional with the current HTML and layout.

</script>
    <script>
        function updateBatteryIcon(percentage, isCharging) {
            const batteryContainer = document.querySelector('.battery-container'); // Get the container
            const batteryLevel = document.getElementById('batteryLevel');
            const tooltipText = document.getElementById('tooltipText');
            if (!batteryLevel || !tooltipText || !batteryContainer) return; // Check if elements exist

            batteryLevel.style.height = `${percentage}%`;

            if (percentage >= 75) {
                batteryLevel.style.backgroundColor = '#4caf50';
            } else if (percentage >= 50) {
                batteryLevel.style.backgroundColor = '#ffeb3b';
            } else if (percentage >= 25) {
                batteryLevel.style.backgroundColor = '#ff9800';
            } else {
                batteryLevel.style.backgroundColor = '#f44336';
            }

             // Add pulsing animation for charging
             // You would need CSS for the '.charging-pulse' class
             if (isCharging) {
                batteryContainer.classList.add('charging-pulse'); // Add class to container
            } else {
                 batteryContainer.classList.remove('charging-pulse'); // Remove class from container
            }


            tooltipText.innerHTML = `${isCharging ? 'Charging' : 'Battery'}: ${percentage}%`;

        }

        if ('getBattery' in navigator) {
            navigator.getBattery().then(battery => {
                function updateAll() {
                    updateBatteryIcon(Math.round(battery.level * 100), battery.charging);
                }

                updateAll(); // Initial update
                battery.addEventListener('levelchange', updateAll);
                battery.addEventListener('chargingchange', updateAll);
            });
        } else {
            console.log("Battery API not supported");
             const batteryContainer = document.querySelector('.battery-container');
             if (batteryContainer) batteryContainer.style.display = 'none'; // Hide if not supported
        }
    </script>


    <script>

        // This script handles background image/color saving and loading.
        // It uses 'SavedBg' key in localStorage.

        // The DOMContentLoaded listener above this section already handles loading.
        // This script block focuses on saving when user interacts with controls.

        document.getElementById('uploadButton').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const imageData = e.target.result;
                    const imageStyle = `url(${imageData})`; // Store as URL string
                    localStorage.setItem('SavedBg', imageStyle); // Use SavedBg key
                    document.body.style.backgroundImage = imageStyle;
                    document.body.style.backgroundSize = '100% 100%'; // Use 100% 100% for uploaded image fill
                    document.body.style.backgroundRepeat = 'no-repeat';
                    document.body.style.backgroundPosition = 'center center';
                    document.body.style.backgroundAttachment = 'fixed';
                    document.body.style.background = ''; // Clear potential previous background style
                };
                reader.readAsDataURL(file);
            }
        });


        document.querySelectorAll('.settingpic').forEach(button => {
            button.addEventListener('click', function() {
                const imageElement = this.querySelector('.settingimgg');
                if (imageElement) {
                    const imageSrc = imageElement.src;
                     if (imageSrc) {
                        const imageStyle = `url(${imageSrc})`; // Store as URL string
                        localStorage.setItem('SavedBg', imageStyle); // Use SavedBg key
                        document.body.style.backgroundImage = imageStyle;
                        document.body.style.backgroundSize = '100% 100%'; // Use 100% 100% for these presets
                        document.body.style.backgroundRepeat = 'no-repeat';
                        document.body.style.backgroundPosition = 'center center';
                        document.body.style.backgroundAttachment = 'fixed';
                         document.body.style.background = ''; // Clear potential previous background style
                    }
                }
            });
        });

        // The updrop menu color selection is saving to 'SavedBg' in the script block above,
        // where the DOMContentLoaded listener and updrop menu logic are defined.
        // That section also correctly handles saving and applying the styles (gradient or solid).
        // No need to duplicate that logic here.

    </script>

<script>
    let dragged = null;

    function saveOrder() {
      // Ensure you are selecting the correct buttons to save order for
      const order = Array.from(document.querySelectorAll('.apps .app-button:not([id="1"])')) // Select only buttons in the main .apps div, exclude spacers with id="1"
        .map(button => button.id);
      localStorage.setItem('buttonOrder', JSON.stringify(order));
    }

    function restoreOrder() {
      const order = JSON.parse(localStorage.getItem('buttonOrder'));
      const container = document.querySelector('.apps');
      if (!container) {
         console.warn(".apps container not found. Button order cannot be restored.");
         return;
      }

       // Get all current app buttons (excluding spacers if they have a specific selector)
       const currentButtons = Array.from(container.querySelectorAll('.app-button:not([id="1"])')); // Exclude spacers
       const currentSpacers = Array.from(container.querySelectorAll('.app-button[id="1"]')); // Select spacers

       const existingButtonsMap = new Map();
       currentButtons.forEach(button => {
           existingButtonsMap.set(button.id, button);
       });

       const orderedButtons = [];
       const buttonsNotFoundInOrder = [];

       if (order && order.length > 0) { // If a saved order exists
           order.forEach(buttonId => {
               const button = existingButtonsMap.get(buttonId);
               if (button) {
                   orderedButtons.push(button);
                   existingButtonsMap.delete(buttonId); // Remove from map once added
               } else {
                   // Handle cases where a button saved in order no longer exists in the HTML
                   console.warn(`Button with ID ${buttonId} found in saved order but not in current HTML. Skipping.`);
               }
           });

           // Add any buttons that were in the HTML but not in the saved order (newly added buttons or those not dragged previously)
            existingButtonsMap.forEach(button => {
                 console.log(`Adding new button ${button.id} to the end.`);
                 buttonsNotFoundInOrder.push(button); // Add to a temporary list
            });

             // Append the buttons not found in the order to the end of the ordered list
            orderedButtons.push(...buttonsNotFoundInOrder);


       } else {
           // If no order is saved, use the current order from the HTML
           console.log("No saved button order found. Using default order.");
            orderedButtons.push(...currentButtons); // Use the initial order of non-spacer buttons
       }

       // Clear the current container content (except perhaps spacers if you want to keep them)
       // A safer approach might be to remove only the app buttons and re-append.
       currentButtons.forEach(button => button.remove()); // Remove only the original app buttons

       // Append buttons in the determined order
       orderedButtons.forEach(button => {
            // Ensure draggable attribute is set for restored buttons
            button.draggable = true;
            container.appendChild(button);
       });

        // Re-append spacers if necessary, potentially at the end
        currentSpacers.forEach(spacer => container.appendChild(spacer));


       // Re-attach drag/drop listeners to the re-added buttons
       attachDragListeners();
    }

    function attachDragListeners() {
         // Select only the actual app buttons, exclude spacers if they have a specific ID/class
         document.querySelectorAll('.apps .app-button:not([id="1"])').forEach(button => { // Exclude spacers
            button.draggable = true; // Ensure draggable is true

            // Use passive: false for dragover to allow preventDefault
            button.addEventListener('dragover', e => {
                e.preventDefault(); // Allow dropping
                e.stopPropagation(); // Prevent event from bubbling up
                e.dataTransfer.dropEffect = 'move'; // Show move cursor

                // Visually indicate drop target - avoid heavy borders on all elements
                // Check if the target is a valid drop target (another app-button, not a spacer, and not the dragged element)
                const dropTarget = e.target.closest('.app-button:not([id="1"])');
                if (dropTarget && dragged && dragged !== dropTarget) {
                    // Remove borders from previously highlighted elements
                    document.querySelectorAll('.apps .app-button').forEach(btn => {
                        btn.style.border = '';
                    });
                    // Highlight the current drop target
                    dropTarget.style.border = '2px dashed white';
                     dropTarget.style.boxSizing = 'border-box'; // Prevent border from changing element size

                }
            }, { passive: false }); // dragover needs passive: false to use preventDefault


            button.addEventListener('dragleave', e => {
                 // Remove border when dragging leaves the element
                 if (e.target.closest('.app-button')) {
                     e.target.closest('.app-button').style.border = '';
                 }
            });

            button.addEventListener('dragstart', e => {
                // Set the dragged element
                dragged = button;
                e.dataTransfer.effectAllowed = 'move';
                 // Optional: Add a class to the dragged item for styling (e.g., reduced opacity)
                 // dragged.classList.add('dragging');
                // Set data to be transferred (optional, but good practice)
                e.dataTransfer.setData('text/plain', button.id);
                 e.stopPropagation(); // Stop event propagation
            });

            button.addEventListener('drop', e => {
                e.preventDefault();
                e.stopPropagation();

                // Ensure we are dropping onto a valid target (another app-button, not a spacer, and not the dragged element)
                const dropTarget = e.target.closest('.app-button:not([id="1"])');

                if (dragged && dropTarget && dragged !== dropTarget) {
                  const parent = dropTarget.parentNode;

                  // Simple swap logic
                  // Insert the dragged element before the drop target
                  parent.insertBefore(dragged, dropTarget);

                  // If the drop target was originally *after* the dragged element,
                  // its position shifted. We need to insert the original dropTarget
                  // back into the position where the dragged element *used* to be relative to the drop target.
                  // A simpler swap implementation:
                  // Get the sibling *after* the drop target *before* inserting dragged
                   const dropTargetNextSibling = dropTarget.nextSibling;

                   // Insert dragged before drop target
                   parent.insertBefore(dragged, dropTarget);

                   // Insert original drop target back into the list, where dragged was (now after dragged)
                   parent.insertBefore(dropTarget, dragged.nextSibling);


                  // Remove the drop target border
                  dropTarget.style.border = '';

                  // Save the new order
                  saveOrder();
                } else if (dropTarget) { // If dropped on itself or invalid target within the button
                    dropTarget.style.border = ''; // Remove border
                }
                // Optional: Remove dragging class
                // if (dragged) dragged.classList.remove('dragging');
                dragged = null; // Reset dragged element
            });

             button.addEventListener('dragend', () => {
                // Clean up any lingering borders or classes on drag end
                 document.querySelectorAll('.apps .app-button').forEach(btn => {
                    btn.style.border = '';
                    // btn.classList.remove('dragging');
                });
                 dragged = null; // Ensure dragged is null
             });
        });

        // Add a drop listener to the container itself to handle dropping at the end
        const container = document.querySelector('.apps');
        if (container) {
             container.addEventListener('dragover', e => {
                 e.preventDefault(); // Allow dropping in the container
                 e.dataTransfer.dropEffect = 'move';
                  // Optional: Indicate container drop zone
                  // container.style.outline = '2px dashed white';
             });

             container.addEventListener('dragleave', () => {
                 // container.style.outline = '';
             });

             container.addEventListener('drop', e => {
                e.preventDefault();
                // container.style.outline = ''; // Remove outline

                // If a draggable item is dropped directly into the container (not on another button)
                if (dragged && e.target === container) {
                    container.appendChild(dragged); // Move the dragged element to the end of the container
                    // Optional: Remove dragging class
                    // dragged.classList.remove('dragging');
                     saveOrder(); // Save the new order
                }
                 dragged = null; // Reset dragged element
             });
        }
    }


    window.addEventListener('load', restoreOrder); // Restore order on load
  </script>
      <script>
        particlesJS("particles-js", {
              "particles": {
                  "number": {
                      "value": 80,
                      "density": {
                          "enable": true,
                          "value_area": 800
                      }
                  },
                  "color": {
                      "value": "#ffffff"
                  },
                  "shape": {
                      "type": "circle",
                      "stroke": {
                          "width": 0,
                          "color": "#000000"
                      }
                  },
                  "opacity": {
                      "value": 0.5,
                      "random": true,
                      "anim": {
                          "enable": false,
                          "speed": 1,
                          "opacity_min": 0.1,
                          "sync": false
                      }
                  },
                  "size": {
                      "value": 3,
                      "random": true,
                      "anim": {
                          "enable": false,
                          "speed": 40,
                          "size_min": 0.1,
                          "sync": false
                      }
                  },
                  "line_linked": {
                      "enable": true,
                      "distance": 150,
                      "color": "#ffffff",
                      "opacity": 0.4,
                      "width": 1
                  },
                  "move": {
                      "enable": true,
                      "speed": 6,
                      "direction": "none",
                      "random": false,
                      "straight": false,
                      "out_mode": "out",
                      "bounce": false,
                      "attract": {
                          "enable": false,
                          "rotateX": 600,
                          "rotateY": 1200
                      }
                  }
              },
              "interactivity": {
                  "detect_on": "canvas",
                  "events": {
                      "onhover": {
                          "enable": true,
                          "mode": "repulse"
                      },
                      "onclick": {
                          "enable": true,
                          "mode": "push"
                      },
                      "resize": true
                  },
                  "modes": {
                      "grab": {
                          "distance": 400,
                          "line_linked": {
                              "opacity": 1
                          }
                      },
                      "bubble": {
                          "distance": 400,
                          "size": 40,
                          "duration": 2,
                          "opacity": 8,
                          "speed": 3
                      },
                      "repulse": {
                          "distance": 200,
                          "duration": 0.4
                      },
                      "push": {
                          "particles_nb": 4
                      },
                      "remove": {
                          "particles_nb": 2
                      }
                  }
              },
              "retina_detect": true
          });
          // console.log("Particles.js initialized successfully."); // DEBUG
        </script>
</body>
</html>